window.JSON||(window.JSON={}),function(){function i(n){return n<10?"0"+n:n}function s(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=h[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function u(i,f){var c,l,h,a,v=n,o,e=f[i];e&&typeof e=="object"&&typeof e.toJSON=="function"&&(e=e.toJSON(i)),typeof t=="function"&&(e=t.call(f,i,e));switch(typeof e){case"string":return s(e);case"number":return isFinite(e)?String(e):"null";case"boolean":case"null":return String(e);case"object":if(!e)return"null";if(n+=r,o=[],Object.prototype.toString.apply(e)==="[object Array]"){for(a=e.length,c=0;c<a;c+=1)o[c]=u(c,e)||"null";return h=o.length===0?"[]":n?"[\n"+n+o.join(",\n"+n)+"\n"+v+"]":"["+o.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,c=0;c<a;c+=1)l=t[c],typeof l=="string"&&(h=u(l,e),h&&o.push(s(l)+(n?": ":":")+h));else for(l in e)Object.hasOwnProperty.call(e,l)&&(h=u(l,e),h&&o.push(s(l)+(n?": ":":")+h));return h=o.length===0?"{}":n?"{\n"+n+o.join(",\n"+n)+"\n"+v+"}":"{"+o.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=window.JSON,e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,r,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof f.stringify!="function"&&(f.stringify=function(i,f,e){var o;if(n="",r="",typeof e=="number")for(o=0;o<e;o+=1)r+=" ";else typeof e=="string"&&(r=e);if(t=f,!f||typeof f=="function"||typeof f=="object"&&typeof f.length=="number")return u("",{"":i});throw new Error("JSON.stringify");}),typeof f.parse!="function"&&(f.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}(),function(n,t){"use strict";var i=n.History=n.History||{};if(typeof i.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");i.Adapter={handlers:{},_uid:1,uid:function(n){return n._uid||(n._uid=i.Adapter._uid++)},bind:function(n,t,r){var u=i.Adapter.uid(n);i.Adapter.handlers[u]=i.Adapter.handlers[u]||{},i.Adapter.handlers[u][t]=i.Adapter.handlers[u][t]||[],i.Adapter.handlers[u][t].push(r),n["on"+t]=function(n,t){return function(r){i.Adapter.trigger(n,t,r)}}(n,t)},trigger:function(n,t,r){r=r||{};var u=i.Adapter.uid(n),f,e;for(i.Adapter.handlers[u]=i.Adapter.handlers[u]||{},i.Adapter.handlers[u][t]=i.Adapter.handlers[u][t]||[],f=0,e=i.Adapter.handlers[u][t].length;f<e;++f)i.Adapter.handlers[u][t][f].apply(this,[r])},extractEventData:function(n,i){return i&&i[n]||t},onDomLoad:function(t){var i=n.setTimeout(function(){t()},2e3);n.onload=function(){clearTimeout(i),t()}}},typeof i.init!="undefined"&&i.init()}(window),function(n){"use strict";var r=n.document,f=n.setTimeout||f,e=n.clearTimeout||e,u=n.setInterval||u,i=n.History=n.History||{};if(typeof i.initHtml4!="undefined")throw new Error("History.js HTML4 Support has already been loaded...");i.initHtml4=function(){if(typeof i.initHtml4.initialized!="undefined")return!1;i.initHtml4.initialized=!0,i.enabled=!0,i.savedHashes=[],i.isLastHash=function(n){var r=i.getHashByIndex(),t;return t=n===r,t},i.saveHash=function(n){return i.isLastHash(n)?!1:(i.savedHashes.push(n),!0)},i.getHashByIndex=function(n){var t=null;return t=typeof n=="undefined"?i.savedHashes[i.savedHashes.length-1]:n<0?i.savedHashes[i.savedHashes.length+n]:i.savedHashes[n],t},i.discardedHashes={},i.discardedStates={},i.discardState=function(n,t,r){var f=i.getHashByState(n),u;return u={discardedState:n,backState:r,forwardState:t},i.discardedStates[f]=u,!0},i.discardHash=function(n,t,r){var u={discardedHash:n,backState:r,forwardState:t};return i.discardedHashes[n]=u,!0},i.discardedState=function(n){var r=i.getHashByState(n),t;return t=i.discardedStates[r]||!1,t},i.discardedHash=function(n){return i.discardedHashes[n]||!1},i.recycleState=function(n){var t=i.getHashByState(n);return i.discardedState(n)&&delete i.discardedStates[t],!0},i.emulated.hashChange&&(i.hashChangeInit=function(){i.checkerFunction=null;var o="",s,t,f,e;return i.isInternetExplorer()?(s="historyjs-iframe",t=r.createElement("iframe"),t.setAttribute("id",s),t.style.display="none",r.body.appendChild(t),t.contentWindow.document.open(),t.contentWindow.document.close(),f="",e=!1,i.checkerFunction=function(){if(e)return!1;e=!0;var u=i.getHash()||"",r=i.unescapeHash(t.contentWindow.document.location.hash)||"";return u!==o?(o=u,r!==u&&(f=r=u,t.contentWindow.document.open(),t.contentWindow.document.close(),t.contentWindow.document.location.hash=i.escapeHash(u)),i.Adapter.trigger(n,"hashchange")):r!==f&&(f=r,i.setHash(r,!1)),e=!1,!0}):i.checkerFunction=function(){var t=i.getHash();return t!==o&&(o=t,i.Adapter.trigger(n,"hashchange")),!0},i.intervalList.push(u(i.checkerFunction,i.options.hashChangeInterval)),!0},i.Adapter.onDomLoad(i.hashChangeInit)),i.emulated.pushState&&(i.onHashChange=function(t){var s=t&&t.newURL||r.location.href,f=i.getHashByUrl(s),u=null,o=null,h=null,e;return i.isLastHash(f)?(i.busy(!1),!1):(i.doubleCheckComplete(),i.saveHash(f),f&&i.isTraditionalAnchor(f)?(i.Adapter.trigger(n,"anchorchange"),i.busy(!1),!1):(u=i.extractState(i.getFullUrl(f||r.location.href,!1),!0),i.isLastSavedState(u)?(i.busy(!1),!1):(o=i.getHashByState(u),e=i.discardedState(u),e?(i.getHashByIndex(-2)===i.getHashByState(e.forwardState)?i.back(!1):i.forward(!1),!1):(i.pushState(u.data,u.title,u.url,!1),!0))))},i.Adapter.bind(n,"hashchange",i.onHashChange),i.pushState=function(t,u,f,e){if(i.getHashByUrl(f))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&i.busy())return i.pushQueue({scope:i,callback:i.pushState,args:arguments,queue:e}),!1;i.busy(!0);var o=i.createStateObject(t,u,f),s=i.getHashByState(o),l=i.getState(!1),c=i.getHashByState(l),h=i.getHash();return i.storeState(o),i.expectedStateId=o.id,i.recycleState(o),i.setTitle(o),s===c?(i.busy(!1),!1):s!==h&&s!==i.getShortUrl(r.location.href)?(i.setHash(s,!1),!1):(i.saveState(o),i.Adapter.trigger(n,"statechange"),i.busy(!1),!0)},i.replaceState=function(n,t,r,u){if(i.getHashByUrl(r))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(u!==!1&&i.busy())return i.pushQueue({scope:i,callback:i.replaceState,args:arguments,queue:u}),!1;i.busy(!0);var f=i.createStateObject(n,t,r),o=i.getState(!1),e=i.getStateByIndex(-2);return i.discardState(o,f,e),i.pushState(f.data,f.title,f.url,!1),!0}),i.emulated.pushState&&i.getHash()&&!i.emulated.hashChange&&i.Adapter.onDomLoad(function(){i.Adapter.trigger(n,"hashchange")})},typeof i.init!="undefined"&&i.init()}(window),function(n,t){"use strict";var f=n.console||t,r=n.document,e=n.navigator,o=n.sessionStorage||!1,h=n.setTimeout,l=n.clearTimeout,c=n.setInterval,a=n.clearInterval,u=n.JSON,v=n.alert,i=n.History=n.History||{},s=n.history;if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,typeof i.init!="undefined")throw new Error("History.js Core has already been loaded...");i.init=function(){return typeof i.Adapter=="undefined"?!1:(typeof i.initCore!="undefined"&&i.initCore(),typeof i.initHtml4!="undefined"&&i.initHtml4(),!0)},i.initCore=function(){if(typeof i.initCore.initialized!="undefined")return!1;if(i.initCore.initialized=!0,i.options=i.options||{},i.options.hashChangeInterval=i.options.hashChangeInterval||100,i.options.safariPollInterval=i.options.safariPollInterval||500,i.options.doubleCheckInterval=i.options.doubleCheckInterval||500,i.options.storeInterval=i.options.storeInterval||1e3,i.options.busyDelay=i.options.busyDelay||250,i.options.debug=i.options.debug||!1,i.options.initialTitle=i.options.initialTitle||r.title,i.intervalList=[],i.clearAllIntervals=function(){var t,n=i.intervalList;if(typeof n!="undefined"&&n!==null){for(t=0;t<n.length;t++)a(n[t]);i.intervalList=null}},i.debug=function(){(i.options.debug||!1)&&i.log.apply(i,arguments)},i.log=function(){var s=typeof f!="undefined"&&typeof f.log!="undefined"&&typeof f.log.apply!="undefined",i=r.getElementById("log"),n,o,h,e,t;for(s?(e=Array.prototype.slice.call(arguments),n=e.shift(),typeof f.debug!="undefined"?f.debug.apply(f,[n,e]):f.log.apply(f,[n,e])):n="\n"+arguments[0]+"\n",o=1,h=arguments.length;o<h;++o){if(t=arguments[o],typeof t=="object"&&typeof u!="undefined")try{t=u.stringify(t)}catch(c){}n+="\n"+t+"\n"}return i?(i.value+=n+"\n-----\n",i.scrollTop=i.scrollHeight-i.clientHeight):s||v(n),!0},i.getInternetExplorerMajorVersion=function(){return i.getInternetExplorerMajorVersion.cached=typeof i.getInternetExplorerMajorVersion.cached!="undefined"?i.getInternetExplorerMajorVersion.cached:function(){for(var n=3,t=r.createElement("div"),i=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++n+"]><i><\/i><![endif]-->")&&i[0];);return n>4?n:!1}()},i.isInternetExplorer=function(){return i.isInternetExplorer.cached=typeof i.isInternetExplorer.cached!="undefined"?i.isInternetExplorer.cached:Boolean(i.getInternetExplorerMajorVersion())},i.emulated={pushState:!Boolean(n.history&&n.history.pushState&&n.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange"in n||"onhashchange"in r)||i.isInternetExplorer()&&i.getInternetExplorerMajorVersion()<8)},i.enabled=!i.emulated.pushState,i.bugs={setHash:Boolean(!i.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!i.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(i.isInternetExplorer()&&i.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(i.isInternetExplorer()&&i.getInternetExplorerMajorVersion()<7)},i.isEmptyObject=function(n){for(var t in n)return!1;return!0},i.cloneObject=function(n){var i,t;return n?(i=u.stringify(n),t=u.parse(i)):t={},t},i.getRootUrl=function(){var n=r.location.protocol+"//"+(r.location.hostname||r.location.host);return(r.location.port||!1)&&(n+=":"+r.location.port),n+="/",n},i.getBaseHref=function(){var t=r.getElementsByTagName("base"),i=null,n="";return t.length===1&&(i=t[0],n=i.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},i.getBaseUrl=function(){return i.getBaseHref()||i.getBasePageUrl()||i.getRootUrl()},i.getPageUrl=function(){var t=i.getState(!1,!1),u=(t||{}).url||r.location.href,n;return n=u.replace(/\/+$/,"").replace(/[^\/]+$/,function(n){return/\./.test(n)?n:n+"/"}),n},i.getBasePageUrl=function(){return r.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(n){return/[^\/]$/.test(n)?"":n}).replace(/\/+$/,"")+"/"},i.getFullUrl=function(n,t){var r=n,u=n.substring(0,1);return t=typeof t=="undefined"?!0:t,/[a-z]+\:\/\//.test(n)||(r=u==="/"?i.getRootUrl()+n.replace(/^\/+/,""):u==="#"?i.getPageUrl().replace(/#.*/,"")+n:u==="?"?i.getPageUrl().replace(/[\?#].*/,"")+n:t?i.getBaseUrl()+n.replace(/^(\.\/)+/,""):i.getBasePageUrl()+n.replace(/^(\.\/)+/,"")),r.replace(/\#$/,"")},i.getShortUrl=function(n){var t=n,u=i.getBaseUrl(),r=i.getRootUrl();return i.emulated.pushState&&(t=t.replace(u,"")),t=t.replace(r,"/"),i.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),t},i.store={},i.idToState=i.idToState||{},i.stateToId=i.stateToId||{},i.urlToId=i.urlToId||{},i.storedStates=i.storedStates||[],i.savedStates=i.savedStates||[],i.normalizeStore=function(){i.store.idToState=i.store.idToState||{},i.store.urlToId=i.store.urlToId||{},i.store.stateToId=i.store.stateToId||{}},i.getState=function(n,t){typeof n=="undefined"&&(n=!0),typeof t=="undefined"&&(t=!0);var r=i.getLastSavedState();return!r&&t&&(r=i.createStateObject()),n&&(r=i.cloneObject(r),r.url=r.cleanUrl||r.url),r},i.getIdByState=function(n){var t=i.extractId(n.url),r;if(!t)if(r=i.getStateString(n),typeof i.stateToId[r]!="undefined")t=i.stateToId[r];else if(typeof i.store.stateToId[r]!="undefined")t=i.store.stateToId[r];else{for(;;)if(t=+new Date+String(Math.random()).replace(/\D/g,""),typeof i.idToState[t]=="undefined"&&typeof i.store.idToState[t]=="undefined")break;i.stateToId[r]=t,i.idToState[t]=n}return t},i.normalizeState=function(n){var t,u;return(n&&typeof n=="object"||(n={}),typeof n.normalized!="undefined")?n:(n.data&&typeof n.data=="object"||(n.data={}),t={},t.normalized=!0,t.title=n.title||"",t.url=i.getFullUrl(i.unescapeString(n.url||r.location.href)),t.hash=i.getShortUrl(t.url),t.data=i.cloneObject(n.data),t.id=i.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,u=!i.isEmptyObject(t.data),(t.title||u)&&(t.hash=i.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=i.getFullUrl(t.hash),(i.emulated.pushState||i.bugs.safariPoll)&&i.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},i.createStateObject=function(n,t,r){var u={data:n,title:t,url:r};return u=i.normalizeState(u),u},i.getStateById=function(n){n=String(n);return i.idToState[n]||i.store.idToState[n]||t},i.getStateString=function(n){var f,r,t;return f=i.normalizeState(n),r={data:f.data,title:n.title,url:n.url},t=u.stringify(r),t},i.getStateId=function(n){var r,t;return r=i.normalizeState(n),t=r.id,t},i.getHashByState=function(n){var r,t;return r=i.normalizeState(n),t=r.hash,t},i.extractId=function(n){var i,t,r;return t=/(.*)\&_suid=([0-9]+)$/.exec(n),r=t?t[1]||n:n,i=t?String(t[2]||""):"",i||!1},i.isTraditionalAnchor=function(n){return!/[\/\?\.]/.test(n)},i.extractState=function(n,t){var u=null,r,f;return t=t||!1,r=i.extractId(n),r&&(u=i.getStateById(r)),u||(f=i.getFullUrl(n),r=i.getIdByUrl(f)||!1,r&&(u=i.getStateById(r)),!u&&t&&!i.isTraditionalAnchor(n)&&(u=i.createStateObject(null,null,f))),u},i.getIdByUrl=function(n){return i.urlToId[n]||i.store.urlToId[n]||t},i.getLastSavedState=function(){return i.savedStates[i.savedStates.length-1]||t},i.getLastStoredState=function(){return i.storedStates[i.storedStates.length-1]||t},i.hasUrlDuplicate=function(n){var r=!1,t;return t=i.extractState(n.url),r=t&&t.id!==n.id,r},i.storeState=function(n){return i.urlToId[n.url]=n.id,i.storedStates.push(i.cloneObject(n)),n},i.isLastSavedState=function(n){var u=!1,f,t,r;return i.savedStates.length&&(f=n.id,t=i.getLastSavedState(),r=t.id,u=f===r),u},i.saveState=function(n){return i.isLastSavedState(n)?!1:(i.savedStates.push(i.cloneObject(n)),!0)},i.getStateByIndex=function(n){var t=null;return t=typeof n=="undefined"?i.savedStates[i.savedStates.length-1]:n<0?i.savedStates[i.savedStates.length+n]:i.savedStates[n],t},i.getHash=function(){return i.unescapeHash(r.location.hash)},i.unescapeString=function(t){for(var i=t,r;;){if(r=n.unescape(i),r===i)break;i=r}return i},i.unescapeHash=function(n){var t=i.normalizeHash(n);return t=i.unescapeString(t),t},i.normalizeHash=function(n){return n.replace(/[^#]*#/,"").replace(/#.*/,"")},i.setHash=function(n,t){var f,u,e;return t!==!1&&i.busy()?(i.pushQueue({scope:i,callback:i.setHash,args:arguments,queue:t}),!1):(f=i.escapeHash(n),i.busy(!0),u=i.extractState(n,!0),u&&!i.emulated.pushState?i.pushState(u.data,u.title,u.url,!1):r.location.hash!==f&&(i.bugs.setHash?(e=i.getPageUrl(),i.pushState(null,null,e+"#"+f,!1)):r.location.hash=f),i)},i.escapeHash=function(t){var r=i.normalizeHash(t);return r=n.escape(r),i.bugs.hashEscape||(r=r.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),r},i.getHashByUrl=function(n){var t=String(n).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=i.unescapeHash(t),t},i.setTitle=function(n){var u=n.title,t;u||(t=i.getStateByIndex(0),t&&t.url===n.url&&(u=t.title||i.options.initialTitle));try{r.getElementsByTagName("title")[0].innerHTML=u.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(f){}return r.title=u,i},i.queues=[],i.busy=function(n){if(typeof n!="undefined"?i.busy.flag=n:typeof i.busy.flag=="undefined"&&(i.busy.flag=!1),!i.busy.flag){l(i.busy.timeout);var t=function(){var n,r,u;if(!i.busy.flag)for(n=i.queues.length-1;n>=0;--n)(r=i.queues[n],r.length!==0)&&(u=r.shift(),i.fireQueueItem(u),i.busy.timeout=h(t,i.options.busyDelay))};i.busy.timeout=h(t,i.options.busyDelay)}return i.busy.flag},i.busy.flag=!1,i.fireQueueItem=function(n){return n.callback.apply(n.scope||i,n.args||[])},i.pushQueue=function(n){return i.queues[n.queue||0]=i.queues[n.queue||0]||[],i.queues[n.queue||0].push(n),i},i.queue=function(n,t){return typeof n=="function"&&(n={callback:n}),typeof t!="undefined"&&(n.queue=t),i.busy()?i.pushQueue(n):i.fireQueueItem(n),i},i.clearQueue=function(){return i.busy.flag=!1,i.queues=[],i},i.stateChanged=!1,i.doubleChecker=!1,i.doubleCheckComplete=function(){return i.stateChanged=!0,i.doubleCheckClear(),i},i.doubleCheckClear=function(){return i.doubleChecker&&(l(i.doubleChecker),i.doubleChecker=!1),i},i.doubleCheck=function(n){return i.stateChanged=!1,i.doubleCheckClear(),i.bugs.ieDoubleCheck&&(i.doubleChecker=h(function(){return i.doubleCheckClear(),i.stateChanged||n(),!0},i.options.doubleCheckInterval)),i},i.safariStatePoll=function(){var u=i.extractState(r.location.href),t;if(!i.isLastSavedState(u))return t=u,t||(t=i.createStateObject()),i.Adapter.trigger(n,"popstate"),i},i.back=function(n){return n!==!1&&i.busy()?(i.pushQueue({scope:i,callback:i.back,args:arguments,queue:n}),!1):(i.busy(!0),i.doubleCheck(function(){i.back(!1)}),s.go(-1),!0)},i.forward=function(n){return n!==!1&&i.busy()?(i.pushQueue({scope:i,callback:i.forward,args:arguments,queue:n}),!1):(i.busy(!0),i.doubleCheck(function(){i.forward(!1)}),s.go(1),!0)},i.go=function(n,t){var r;if(n>0)for(r=1;r<=n;++r)i.forward(t);else{if(!(n<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(r=-1;r>=n;--r)i.back(t)}return i},i.emulated.pushState){var y=function(){};i.pushState=i.pushState||y,i.replaceState=i.replaceState||y}else i.onPopState=function(t,u){var o=!1,f=!1,s,e;return i.doubleCheckComplete(),s=i.getHash(),s?(e=i.extractState(s||r.location.href,!0),e?i.replaceState(e.data,e.title,e.url,!1):(i.Adapter.trigger(n,"anchorchange"),i.busy(!1)),i.expectedStateId=!1,!1):(o=i.Adapter.extractEventData("state",t,u)||!1,f=o?i.getStateById(o):i.expectedStateId?i.getStateById(i.expectedStateId):i.extractState(r.location.href),f||(f=i.createStateObject(null,null,r.location.href)),i.expectedStateId=!1,i.isLastSavedState(f)?(i.busy(!1),!1):(i.storeState(f),i.saveState(f),i.setTitle(f),i.Adapter.trigger(n,"statechange"),i.busy(!1),!0))},i.Adapter.bind(n,"popstate",i.onPopState),i.pushState=function(t,r,u,f){if(i.getHashByUrl(u)&&i.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(f!==!1&&i.busy())return i.pushQueue({scope:i,callback:i.pushState,args:arguments,queue:f}),!1;i.busy(!0);var e=i.createStateObject(t,r,u);return i.isLastSavedState(e)?i.busy(!1):(i.storeState(e),i.expectedStateId=e.id,s.pushState(e.id,e.title,e.url),i.Adapter.trigger(n,"popstate")),!0},i.replaceState=function(t,r,u,f){if(i.getHashByUrl(u)&&i.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(f!==!1&&i.busy())return i.pushQueue({scope:i,callback:i.replaceState,args:arguments,queue:f}),!1;i.busy(!0);var e=i.createStateObject(t,r,u);return i.isLastSavedState(e)?i.busy(!1):(i.storeState(e),i.expectedStateId=e.id,s.replaceState(e.id,e.title,e.url),i.Adapter.trigger(n,"popstate")),!0};if(o){try{i.store=u.parse(o.getItem("History.store"))||{}}catch(p){i.store={}}i.normalizeStore()}else i.store={},i.normalizeStore();i.Adapter.bind(n,"beforeunload",i.clearAllIntervals),i.Adapter.bind(n,"unload",i.clearAllIntervals),i.saveState(i.storeState(i.extractState(r.location.href,!0))),o&&(i.onUnload=function(){var n,t;try{n=u.parse(o.getItem("History.store"))||{}}catch(r){n={}}n.idToState=n.idToState||{},n.urlToId=n.urlToId||{},n.stateToId=n.stateToId||{};for(t in i.idToState)i.idToState.hasOwnProperty(t)&&(n.idToState[t]=i.idToState[t]);for(t in i.urlToId)i.urlToId.hasOwnProperty(t)&&(n.urlToId[t]=i.urlToId[t]);for(t in i.stateToId)i.stateToId.hasOwnProperty(t)&&(n.stateToId[t]=i.stateToId[t]);i.store=n,i.normalizeStore(),o.setItem("History.store",u.stringify(n))},i.intervalList.push(c(i.onUnload,i.options.storeInterval)),i.Adapter.bind(n,"beforeunload",i.onUnload),i.Adapter.bind(n,"unload",i.onUnload)),i.emulated.pushState||(i.bugs.safariPoll&&i.intervalList.push(c(i.safariStatePoll,i.options.safariPollInterval)),(e.vendor==="Apple Computer, Inc."||(e.appCodeName||"")==="Mozilla")&&(i.Adapter.bind(n,"hashchange",function(){i.Adapter.trigger(n,"popstate")}),i.getHash()&&i.Adapter.onDomLoad(function(){i.Adapter.trigger(n,"hashchange")})))},i.init()}(window)